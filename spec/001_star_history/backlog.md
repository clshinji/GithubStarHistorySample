# 課題・バックログ - GitHub Star History メーカー

## 現状の検証結果（star-history.com との比較）

### 1. LangChain (12万スター超)
- **制限**: GitHub API の `stargazers` エンドポイントは 40,000 件目（400ページ目）までしか取得できない。
- **挙動**: 
  - 本ツール：最初の 40,000 件までをサンプリング取得し、最新（12万件）を終点として直線で結ぶ。
  - 本家 (star-history.com)：全期間の概形が正しく表示されている。
- **考察**: 本家は、4万件制限を回避するために、おそらくランダムアクセス（ページ番号を飛ばして試行錯誤）や、特定の日付範囲を二分探索的に探るアルゴリズム、あるいは独自のキャッシュサーバーを使用している可能性がある。

### 2. Mastra / CrewAI
- **挙動**: スター数が 40,000 件以下のため、サンプリング取得で概ね正確なグラフが描画できている。

---

## 課題リスト（Backlog）

### 🚀 短期的な改善
- [ ] **サンプリングアルゴリズムの改良**:
  - 現在の均等ページ取得だけでなく、スター数が 40,000 を超える場合に「4万件目の到達日」を正確に特定し、そこまでの密度を上げる。
- [ ] **エラーハンドリングの強化**:
  - APIレート制限時に、単なるアラートだけでなく、設定画面への誘導をよりスムーズにする。
- [ ] **UIの微調整**:
  - 読み込み中のプログレスバー表示（何％取得済みか）。

### 🛠 中長期的な改善
- [ ] **40,000件制限の回避ロジックの実装**:
  - 本家のような、二分探索的なページ特定ロジックを検討し、4万件以降もサンプリングできるようにする（GitHub API の `page` パラメータがどこまで許容されるか再調査が必要）。
- [ ] **データの永続化**:
  - IndexedDB 等を使用して、一度取得したリポジトリの履歴をブラウザにキャッシュし、差分のみを取得するようにする。
- [ ] **xkcdスタイルの導入**:
  - `chartjs-plugin-rough` 等を使用して、本家のような手書き風デザインを選択可能にする。

### ⚙️ 技術的負債・改善案
- **Vanilla JS の整理**: `script.js` が大きくなってきたため、API取得部、描画部、UI制御部をモジュール分割することを検討。
